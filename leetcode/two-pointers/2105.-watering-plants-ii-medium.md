---
description: Array, Two Pointers, Simulation
---

# 2105. Watering Plants II - Medium

## 釐清需求與邊界條件

* **輸入:**
  * `plants`: 整數陣列，表示每個植物需要的水量
  * `capacityA`: Alice 水壺的容量
  * `capacityB`: Bob 水壺的容量
* **輸出:**
  * 返回最少需要重新裝水的次數
* **邊界條件:**
  * `1 <= plants.length <= 10^5`
  * `1 <= plants[i] <= 10^6`
  * `plants[i] <= capacityA, capacityB <= 10^6`

## 口述解法

* 使用雙指針技巧，Alice 從左邊(l=0)開始，Bob 從右邊(r=n-1)開始
* 維護當前水量 `a` 和 `b`，以及重新裝水次數 `ans`
* 當 `l < r` 時持續處理：
  * Alice 澆水：如果當前水量不足，先重新裝水，然後澆植物
  * Bob 澆水：同樣邏輯
  * 雙指針向中間移動
* 處理最後一株植物：當 `l == r` 時，讓剩餘水量多的人負責

## 測試與優化

* 程式碼

```python
class Solution:
    def minimumRefill(self, plants: List[int], capacityA: int, capacityB: int) -> int:
        l = 0
        r = len(plants) - 1
        ans = 0
        a = capacityA
        b = capacityB

        while l < r:
            if a < plants[l]:
                ans += 1
                a = capacityA
            a -= plants[l]

            if b < plants[r]:
                ans += 1
                b = capacityB
            b -= plants[r]

            l += 1
            r -= 1

        if l == r and max(a, b) < plants[l]:
            ans += 1
            
        return ans
```

## 時間與空間複雜度

* 時間複雜度：O(n)
  * 每個植物最多被訪問一次，雙指針從兩端向中間移動
* 空間複雜度：O(1)
  * 只使用了常數個額外變數(l, r, ans, a, b)，沒有使用額外的資料結構
