---
description: Bit Manipulation, Hash Table, String, Prefix Sum
---

# 1930. Unique Length-3 Palindromic Subsequences - Medium

## 釐清需求與邊界條件

* 輸入：一個字符串 s，只包含小寫英文字母
* 輸出：長度為 3 的不同回文子序列的數量
* 邊界條件：&#x20;
  * 字符串長度範圍：1 ≤ s.length ≤ 10⁵&#x20;
  * 如果字符串長度小於 3，則無法形成長度為 3 的回文子序列

## 口述解法

* 長度為 3 的回文子序列格式必須是 aba，其中 a 是相同的字符，b 可以是任意字符
* 每個小寫字母 c，找到它在字符串中第一次出現的位置 l 和最後一次出現的位置 r
* 如果這兩個位置距離大於 1（即 r - l > 1），則可以在中間位置放置任意字符形成回文&#x20;
* 中間可以放的不同字符數量等於 l+1 到 r-1 位置之間的不同字符數量

## 測試與優化

* 程式碼
* 測資與注意事項

## 時間與空間複雜度

* 時間複雜度： O(26\* n)
  * 遍歷 26 個字母：O(26) = O(1)
  * 對每個字母，find 和 rfind 操作：O(n)&#x20;
  * 最壞情況下 O(n) 時間
  * 總體時間複雜度：O(26 \* n)
* 空間複雜度： O(n)
  * 最壞情況下 O(n)
