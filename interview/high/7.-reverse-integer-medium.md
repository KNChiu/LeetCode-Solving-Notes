---
description: Math
---

# 7. Reverse Integer - Medium

## 釐清需求與邊界條件

* **輸入**: 一個有符號的 32 位元整數 x
* **輸出**: 將 x 的數字反轉後的結果，如果反轉後的數字超出 32 位元有符號整數的表示範圍，則返回 0
* **邊界條件**:
  * 整數可能是正數或負數
  * 需考慮 32 位元整數的上下限: \[-2^31, 2^31-1] 即 \[-2147483648, 2147483647]
  * 反轉後的數字可能會溢出，此時應返回 0

## 口述解法

**主要函數 reverse(x)**:

1. 初始化結果變數 ans = 0
2. 設定 32 位元整數的上下限: mi = -2^31, mx = 2^31-1
3. 使用 while 循環，當 x 不等於 0 時:
   * 首先檢查是否會溢出:
     * 如果 ans < mi // 10 + 1 或 ans > mx // 10，返回 0
   * 取 x 的最後一位數字 y = x % 10
   * 如果 x 是負數且 y 為正數 (Python 中的取模運算可能與期望不同)，則調整 y: y -= 10
   * 更新 ans: ans = ans \* 10 + y
   * 更新 x: x = (x - y) // 10
4. 返回最終結果 ans

## 測試與優化

* 程式碼

```python
class Solution:
    def reverse(self, x: int) -> int:
        ans = 0
        mi, mx = -(2**31), 2**31 - 1
        while x:
            if ans < mi // 10 + 1 or ans > mx // 10:
                return 0
            y = x % 10
            if x < 0 and y > 0:
                y -= 10
            ans = ans * 10 + y
            x = (x - y) // 10
        return ans
```

## 時間與空間複雜度

* **時間複雜度**: O(log(x)) -&#x20;
  * 因為處理的是數字的每一位，而 n 位數字的整數 x 的位數約為 log10(x)
* **空間複雜度**:&#x20;
  * O(1) - 只使用了固定數量的變數，不隨輸入大小變化
